UFW - uncomplicated (несложный) firewall.

Смотреть запущен ли ufw: `sudo ufw status`.

Добавить новое правило, разрешающее ssh: `sudo ufw allow 22`. Будут разрешены и tcp и udp подключения.

Либо можно указать конкретно: `sudo ufs allow 22/tcp`.

Включить ufw: `sudo ufw enable`.

Смотреть расширенный статус: `sudo ufw status verbose`.

Разрешить подключения по ssh только с определенного IP-адреса: `sudo ufw allow from 192.168.1.60 to any port 22`. Здесь `any` означает разрешить подключение на любой IP-адрес на целевой машине, т.к. на нашем сервере может быть несколько сетевых интерфейсов.

Смотреть статус и приоритет правил: `sudo ufw status numbered`.

Новое правило будет добавлено в низ цепочки. Таким образом все равно будут разрешаться входящие подключения на 22 порт с любого IP-адреса.

```
Status: active

     To                         Action      From
     --                         ------      ----
[ 1] 22                         ALLOW IN    Anywhere
[ 2] 22                         ALLOW IN    192.168.1.60
[ 3] 22 (v6)                    ALLOW IN    Anywhere (v6)
```

Удалим первое правило: `sudo ufw delete 1`. Но при этом останется аналогичное правило для IPv6.

Можно удалить правило по его названию, а не по номеру: `sudo ufw delete allow 22`. Т.к. добавлялось правило командой `allow 22`, то таким же образом и удаляется.

Разрешить входящие ssh-подключения для диапазона IP-адресов: `sudo ufw allow from 10.11.12.0/24 to any port 22`.

Разрешить любые входящие подключения (на любой порт) для диапазона IP-адресов: `sudo ufw allow from 10.11.12.0/24`.

Запретить все подключения с определенного IP-адреса: `sudo ufw deny from 10.11.12.100`.

Однако новое запрещающее правило попадет в низ цепочки, и соответственно оно не сработает, т.к. выше есть разрешающее правило:

```
Status: active

     To                         Action      From
     --                         ------      ----
[ 1] 22                         ALLOW IN    192.168.1.60
[ 2] 22                         ALLOW IN    10.11.12.0/24
[ 3] Anywhere                   ALLOW IN    10.11.12.0/24
[ 4] Anywhere                   DENY IN     10.11.12.100
```

Удалим четвертое правило: `sudo ufw delete 4`