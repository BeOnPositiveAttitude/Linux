### Команда ps

`ps a` и `ps -a` - это разные команды, BSD-style и UNIX-style соответственно.

Смотреть примеры в мануале: `man ps` => `/EXAMPLES`.

В выводе команды `ps aux` есть колонка `TIME`, которая означает время использования CPU определенным процессом.

В колонке `COMMAND` есть имена процессов в квадратных скобках, например `[kthreadd]` - это процессы ядра в особом защищенном сегменте.

Смотреть информацию по определенному процессу, указав его PID: `ps u 1`, здесь `u = user-oriented-format`.

Смотреть список процессов, запущенных пользователем aaron: `ps -U aaron`.

Смотреть список процессов, запущенных пользователем aaron в user-oriented-format: `ps u -U aaron`.

Смотреть все процессы, порожденные другим процессом: `ps -o pid,command --ppid 62880`. Здесь `ppid = parent process ID`.

"Грепнуть" список всех процессов и искать там syslog: `pgrep -a syslog`.

Здесь `pgrep = process grep`, покажет PID искомого процесса и его название.

### Параметр nice

Значение параметра `nice` может варьироваться в диапазоне от `-20` до `19`.

Чем меньше значение параметра `nice`, тем выше приоритет процесса.

Запустить процесс с указанным значением nice: `nice -n 11 bash`. Здесь `n = numeric`.

Чтобы значение параметра `nice` было видно в выводе команды `ps`, нужно добавить флаг: `ps lax`. Здесь `l = long-listing-format`.

Обычный пользователь в системе может только повышать значение `nice` в диапазоне от 0 до 19, тем самым понижая приоритет процесса.

Пользователь `root` может повышать приоритет процесса путем понижения значения nice до отрицательных значений.

Отобразить список всех процессов в формате дерева "родитель-ребенок": `ps fax`. Здесь `f = forest-view`.

Переопределить nice value для указанного процесса: `renice 7 PID_number`.

### Сигналы

Сигналы `SIGSTOP` и `SIGKILL` не могут игнорироваться никакими процессами.

Когда процесс получает сигнал `SIGSTOP`, то он приостанавливает своё выполнение до получения сигнала `SIGCONT` (continue).

Когда процесс получает сигнал `SIGKILL`, то он немедленно завершает работу без возможности сохранить результат выполнения.

Смотреть список возможных сигналов: `kill -L`.

```
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ
26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR
31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3
38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13
48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12
53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7
58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX
```

Можно передавать сигнал, указывая его полное имя, например `kill -SIGHUP PID_number`, можно просто `kill -HUP PID_number`, а можно `kill -1 PID_number`.

`SIGHUP` - signal-hang-up, "повесить трубку", оповещение программ, запущенных через модемное соединение, об обрыве связи. По факту рестартует процесс.

Если выполнить команду `kill PID_number` без указания определенного сигнала, то по умолчанию будет передан сигнал `SIGTERM` - мягкое завершение процесса.

Если нужно убить сразу все процессы, например по имени `bash`, то сначала проверяем какие именно процессы соответствуют указанному имени (чтобы случайно не промахнуться): `pgrep -a bash`.

После этого можем убивать: `pkill -KILL bash`. Здесь `pkill = process kill`.

### Background / Foreground

Выполнение процесса можно "поставить на паузу", например открытое окно редактора vim с помощью комбинации `Ctrl + z`, это приостанавливает выполнение процесса.

Смотреть процессы бегущие в background-е: `jobs`.

Вернуть процесс обратно в активное состояние: `fg` или `fg 1`.

Если же нужно, чтобы процесс продолжил выполняться в background, то нужно добавить символ `&` в конце команды: `sleep 300 &`.

Также можно отправить выполняться в background процесс под номером 1, который в данный момент поставлен на паузу через `Ctrl + z`, командой `bg 1`.

### Команда lsof

Смотреть список файлов, с которыми работает определенный процесс: `lsof -p PID_numb`. Здесь `lsof = list-of-open-files, p = process`.

Смотреть какие процессы работают с указанным файлом/директорией: `sudo lsof /var/log/syslog`.