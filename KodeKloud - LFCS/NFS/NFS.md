# Настройка NFS-сервера

Ставим пакет: `sudo apt install nfs-kernel-server`.

Редактируем конфиг: `sudo vim /etc/exports`. В левой части этого конфига указывается директория на NFS-сервере, которая будет доступна клиентам по сети для монтирования, в правой части перечисляются разрешенные для подключения клиенты и доступные им опции монтирования, которые могут отличаться для разных клиентов.

<img src="image.png" width="700" height="200"><br>

`sync` - синхронная запись данных. NFS убеждается, что записанные клиентом данные действительно сохранены на устройстве, прежде чем отправить подтверждение об успешной операции.

`async` - асинхронная запись данных. Клиент может сделать несколько запросов на запись и NFS ответит, что запись завершена еще до фактического сохранения данных на диск. Этот режим позволяет клиентам записывать изменения быстрее, но не гарантирует, что все они действительно сохранены на диск. Таким образом мы можем столкнуться с ситуацией, когда NFS-сервер ответил клиенту, что запись завершена, хотя фактически данные еще не записались на диск. Сервер неожиданно перезагружается, что приводит к потере данных об операции записи.

`no_subtree_check` - /nfs/disk1 => /nfs/disk1/backups/database